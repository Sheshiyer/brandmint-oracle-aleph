import {Composition} from 'remotion';
import {VIDEO} from './constants';
import {BrandSizzle, SIZZLE_SCENES} from './scenes/brand-sizzle';
import {ProductShowcase, SHOWCASE_SCENES} from './scenes/product-showcase';
{% if has_audio %}
import {AudioSlides, AUDIO_DURATION_FRAMES} from './scenes/audio-slides';
{% endif %}
import {buildFrameMap} from './constants';

const sizzleDuration = buildFrameMap(SIZZLE_SCENES).total;
const showcaseDuration = buildFrameMap(SHOWCASE_SCENES).total;

export const RemotionRoot = () => {
  return (
    <>
      <Composition
        id="brand-sizzle"
        component={BrandSizzle}
        durationInFrames={sizzleDuration}
        fps={VIDEO.fps}
        width={VIDEO.width}
        height={VIDEO.height}
      />
      <Composition
        id="product-showcase"
        component={ProductShowcase}
        durationInFrames={showcaseDuration}
        fps={VIDEO.fps}
        width={VIDEO.width}
        height={VIDEO.height}
      />
{% if has_audio %}
      <Composition
        id="audio-slides"
        component={AudioSlides}
        durationInFrames={AUDIO_DURATION_FRAMES}
        fps={VIDEO.fps}
        width={VIDEO.width}
        height={VIDEO.height}
      />
{% endif %}
    </>
  );
};
